<div class="flex flex-col h-full bg-[#0f0f13] border-r border-white/5">

  <!-- Header -->
  <div class="px-5 pt-6 pb-4">
    <h2 class="text-xs font-semibold tracking-[0.2em] text-gray-500 uppercase mb-4">Comprobantes</h2>
    <!-- Search -->
    <div class="relative">
      <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 11A6 6 0 115 11a6 6 0 0112 0z"/>
      </svg>
      <input
        type="text"
        placeholder="Buscar emisor o receptor..."
        (input)="onSearch($any($event.target).value)"
        class="w-full bg-white/5 border border-white/8 rounded-lg pl-9 pr-3 py-2 text-xs text-gray-300 placeholder-gray-600 focus:outline-none focus:border-violet-500/50 transition-colors"
      />
    </div>
  </div>

  <!-- List -->
  <div class="flex-1 overflow-y-auto px-3 pb-4 space-y-1 scrollbar-thin">

    @if (state.loading()) {
      @for (i of [1,2,3,4,5]; track i) {
        <div class="rounded-xl p-4 bg-white/3 animate-pulse">
          <div class="h-3 bg-white/10 rounded w-1/2 mb-3"></div>
          <div class="h-2 bg-white/5 rounded w-1/3"></div>
        </div>
      }
    }

    @for (v of state.filtered(); track v.id) {
      <button
        (click)="select(v)"
        class="w-full text-left rounded-xl p-4 transition-all duration-200 group border"
        [class]="state.selectedId() === v.id
          ? 'bg-violet-500/10 border-violet-500/30'
          : 'bg-white/3 border-transparent hover:bg-white/5 hover:border-white/10'"
      >
        <div class="flex items-start justify-between gap-2 mb-2">
          <div class="flex items-center gap-2 min-w-0">
            <span class="text-base leading-none">{{ categoryIcon(v) }}</span>
            <div class="min-w-0">
              <p class="text-sm font-medium text-gray-200 truncate">{{ v.payee || v.payer }}</p>
              <p class="text-[10px] text-gray-600 mt-0.5">{{ v.paymentDate | date:'yyyy-MM-dd' }}</p>
            </div>
          </div>
          <span class="shrink-0 text-[9px] font-semibold px-2 py-0.5 rounded-full"
            [class]="statusColor(v.status)">
            {{ statusLabel(v.status) }}
          </span>
        </div>
        <div class="flex items-center justify-between">
          <span class="text-sm font-bold text-gray-100">
            {{ v.currency }} {{ v.amount | number:'1.1-2' }}
          </span>
          <span class="text-[10px] text-gray-600 truncate max-w-[80px]">{{ v.bankName }}</span>
        </div>
      </button>
    }

    @if (!state.loading() && state.filtered().length === 0) {
      <div class="flex flex-col items-center justify-center py-16 text-center">
        <div class="w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center mb-3">
          <svg class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          </svg>
        </div>
        <p class="text-xs text-gray-600">Sin comprobantes</p>
      </div>
    }
  </div>

  <!-- Footer count -->
  <div class="px-5 py-3 border-t border-white/5">
    <p class="text-[10px] text-gray-600">{{ state.filtered().length }} de {{ state.vouchers().length }} comprobantes</p>
  </div>
</div>